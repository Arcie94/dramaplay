---
const { currentPath } = Astro.props; // Optional: to highlight active
const pathname = new URL(Astro.request.url).pathname;

const isActive = (path: string) => {
  // Exact match for root, or starts with for others
  if (path === "/") return pathname === "/";
  return pathname.startsWith(path);
};
---

<nav
  class="fixed bottom-0 z-50 w-full bg-zinc-950/90 backdrop-blur-lg border-t border-white/10 pb-safe"
>
  <div class="flex justify-around items-center h-16">
    <a
      href="/"
      class={`flex flex-col items-center gap-1 ${isActive("/") && pathname !== "/movies" && pathname !== "/search" && pathname !== "/mylist" && pathname !== "/profile" ? "text-red-500" : "text-zinc-500"}`}
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill={isActive("/") &&
        pathname !== "/movies" &&
        pathname !== "/search" &&
        pathname !== "/mylist" &&
        pathname !== "/profile"
          ? "currentColor"
          : "none"}
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"
        ></path>
      </svg>
      <span class="text-[10px] font-medium">Home</span>
    </a>

    <a
      href="/movies"
      class={`flex flex-col items-center gap-1 ${isActive("/movies") ? "text-red-500" : "text-zinc-500"}`}
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill={isActive("/movies") ? "currentColor" : "none"}
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 12V5.625m4.875 13.875c-.621 0-1.125-.504-1.125-1.125v-9c0-.621.504-1.125 1.125-1.125m.375 0h10.5a.75.75 0 01.75.75v9.75a.75.75 0 01-.75.75h-10.5m10.5-10.5a1.125 1.125 0 011.125 1.125m0 0v10.5m-12-10.5h10.5m-10.5 0V3.375a1.125 1.125 0 011.125-1.125h9a1.125 1.125 0 011.125 1.125v2.25"
          href="/search"
          class={`flex flex-col items-center gap-1 ${isActive("/search") ? "text-red-500" : "text-zinc-500"}`}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
            class="w-6 h-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
            ></path>
          </svg>
          <span class="text-[10px] font-medium">Search</span>
        </path>

        <a
          href="/mylist"
          class={`flex flex-col items-center gap-1 ${isActive("/mylist") ? "text-red-500" : "text-zinc-500"}`}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill={isActive("/mylist") ? "currentColor" : "none"}
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
            class="w-6 h-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"
            ></path>
          </svg>
          <span class="text-[10px] font-medium">My List</span>
        </a>

        <a
          href="/profile"
          id="profile-nav-btn"
          class={`flex flex-col items-center gap-1 ${isActive("/profile") ? "text-red-500" : "text-zinc-500"} hidden`}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill={isActive("/profile") ? "currentColor" : "none"}
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
            class="w-6 h-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"
            ></path>
          </svg>
          <span class="text-[10px] font-medium">Profile</span>
        </a>

        <a
          href="#"
          id="login-nav-btn"
          class="flex flex-col items-center gap-1 text-zinc-500"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
            class="w-6 h-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"
            ></path>
          </svg>
          <span class="text-[10px] font-medium">Login</span>
        </a>
      </svg>
    </a>

    <style>
      .pb-safe {
        padding-bottom: env(safe-area-inset-bottom, 20px);
      }
    </style>
  </div>
</nav>
